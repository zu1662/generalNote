# javascript æ­£åˆ™è¡¨è¾¾å¼

## å‰è¨€

æ—¥å¸¸åœ¨ä½¿ç”¨JSçš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œæ€»æ˜¯æœ‰å¾ˆå¤šæ–¹é¢çš„å‚æ•°æˆ–è€…è¯­æ³•è®°ä¸æ¸…æ¥šã€‚ç°åœ¨é€šè¿‡åˆ†ç±»æ•´ç†ï¼Œæ¥å¼ºåŒ–è‡ªå·±å¯¹å…¶çš„è®°å¿†å’Œç†è§£ã€‚

## JSæ­£åˆ™çš„åŸºæœ¬è¯­æ³•

1. ç®€å•çš„æ­£åˆ™è¯­æ³•
   `/æ­£åˆ™è¡¨è¾¾å¼ä¸»ä½“/ä¿®é¥°ç¬¦(å¯é€‰)`
   > `var regex = /xyz/i;`
2. ä½¿ç”¨`RegExp`å¯¹è±¡è¿›è¡Œåˆ›å»ºæ­£åˆ™
   `new RegExp('æ­£åˆ™è¡¨è¾¾å¼ä¸»ä½“', 'ä¿®é¥°ç¬¦')`
   > `var regex = new RegExp('xyz', 'i');`

å…¶ä¸­ï¼Œä¿®é¥°ç¬¦çš„åˆ—è¡¨å¦‚ä¸‹ï¼š
|ä¿®é¥°ç¬¦|ä½œç”¨|
|----|:----:|----:|
|i|åŒ¹é…æ—¶ï¼Œå¤§å°å†™ä¸æ•æ„Ÿ|
|g|æ‰§è¡Œå…¨å±€åŒ¹é…ï¼Œä¼šæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…å› ç´ |
|m|æ‰§è¡Œå¤šè¡ŒåŒ¹é…|
|u (es6æ–°å¢)|â€œUnicode æ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº\uFFFFçš„ï¼Œå››ä¸ªå­—èŠ‚çš„ Unicode å­—ç¬¦|
|y (es6æ–°å¢)|'ç²˜è¿'ä¿®é¥°ç¬¦ï¼Œç±»ä¼¼äº'g'ï¼Œä¸è¿‡å…¶ä¸‹æ¬¡çš„åŒ¹é…å¿…é¡»ä»å‰ä¸€æ¬¡åŒ¹é…çš„æœ«å°¾è¿›è¡Œ|

## æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™æ¦‚è¿°

### å…ƒå­—ç¬¦
|å…ƒå­—ç¬¦|æè¿°|
|----|:----:|
|.|ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œç¬¦ï¼ˆ\nï¼‰ä»¥å¤–|
|^| ä»¥æŸä¸ªå­—ç¬¦å¼€å§‹|
|$|ä»¥æŸä¸ªå­—ç¬¦ç»“å°¾|
|\\|è½¬ä¹‰å­—ç¬¦|
|\w|åŒ¹é…ä¸€ä¸ª 0-9ã€a-zã€A-Zã€_ çš„æ•°å­—æˆ–å­—ç¬¦,ç›¸å½“äº[0-9a-zA-Z_]. å…¶åä¹‰å…ƒå­—ç¬¦ä¸ºï¼š\W|
|\s|åŒ¹é…ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦...ï¼‰ã€‚ å…¶åä¹‰ä¸ºï¼š \S|
|\t|åŒ¹é…åˆ¶è¡¨ç¬¦|
|\n|åŒ¹é…æ¢è¡Œç¬¦|
|\d|åŒ¹é…æ•°å­—ï¼Œç›¸å½“äº[0-9]ã€‚å…¶åä¹‰ä¸ºï¼š\D|
|\0|åŒ¹é…NULLå­—ç¬¦|
|\||oré€‰é¡¹ï¼Œï¼ˆx\|yï¼‰è¡¨ç¤ºåŒ¹é…xæˆ–è€…y|
|[]|ä»»ä¸€é€‰æ‹©ï¼Œ[xyz]è¡¨ç¤ºx,y,zä¸­çš„ä»»æ„ä¸€ä¸ªã€‚[^xyz]è¡¨ç¤ºé™¤äº†x,y,zä¸­çš„ä»»ä¸€å­—ç¬¦|
|-|èŒƒå›´æ ‡è¯†ç¬¦ï¼Œ[a-z]è¡¨ç¤ºa-zä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚[^a-z]è¡¨ç¤ºé™¤äº†a-zä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦|
|()|æ­£åˆ™ä¸­çš„åˆ†ç»„|

### é‡è¯å…ƒå­—ç¬¦
|å…ƒå­—ç¬¦|æè¿°|
|----|:----:|
|?|å‡ºç°0æ¬¡æˆ–1æ¬¡|
|+|å‡ºç°1æ¬¡æˆ–å¤šæ¬¡|
|*|å‡ºç°0æ¬¡åˆ°å¤šæ¬¡|
|{n}|å‡ºç°næ¬¡|
|{n,}|å‡ºç°næ¬¡åˆ°å¤šæ¬¡|
|{n,m}|å‡ºç°næ¬¡åˆ°mæ¬¡|

## JSæ­£åˆ™çš„è¡¨è¾¾å¼æ–¹æ³•

1.  `exec`æ–¹æ³•ï¼Œè¡¨ç¤ºåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…çš„ **RegExp** æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ˆæœªåŒ¹é…åˆ°åˆ™è¿”å›nullï¼‰ã€‚éœ€è¦æ³¨æ„çš„å¼ï¼Œå®ƒæ¯æ¬¡æ‰§è¡Œåªä¼šè¿”å›å·²æ‰¾åˆ°çš„åŒ¹é…ï¼Œå¦‚æœæƒ³è¦ç»§ç»­æŸ¥æ‰¾ï¼Œéœ€è¦ç»§ç»­æ‰§è¡Œã€‚
   ```javascript
    let myRe = /l\d+l/g
    myRe.exec('lol is very good l1l l2l i3l ll')
    // ç»“æœä¸º ["l1l", index: 17,....] çš„æ•°ç»„

    //å†æ¬¡æ‰§è¡Œ
    myRe.exec('lol is very good l1l l2l i3l ll')
    // ç»“æœä¸º ["l2l", index: 21,...] çš„æ•°ç»„
   ```
2.  `test`æ–¹æ³•ï¼Œè¡¨ç¤ºä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•æ˜¯å¦åŒ¹é…çš„ **RegExp** æ–¹æ³•ï¼Œå®ƒè¿”å›trueæˆ–falseã€‚
   ```javascript
    let myRe = /l\d+l/g
    myRe.test('lol is very good l1l l2l i3l ll')
    // ç»“æœä¸º true
   ```
3.  `match`ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„ **String** æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„æˆ–è€…åœ¨æœªåŒ¹é…åˆ°æ—¶è¿”å›nullã€‚
   ```javascript
    let myRe = /l\d+l/g
    'lol is very good l1l l2l i3l ll'.match(myRe)
    // ç»“æœä¸º ["l1l", "l2l"]

    'hello world'.match(myRe)
    // ç»“æœä¸º null
   ```
4.  `search`ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•åŒ¹é…çš„ **String** æ–¹æ³•ï¼Œå®ƒè¿”å›åŒ¹é…åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œæˆ–è€…åœ¨å¤±è´¥æ—¶è¿”å›-1ã€‚éœ€è¦æ³¨æ„çš„å¼ï¼Œsearchåªä¼šå¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„indexå€¼ã€‚
   ```javascript
    let myRe = /l\d+l/g
    'lol is very good l1l l2l i3l ll'.search(myRe)
    // ç»“æœä¸º 17

    'hello world'.search(myRe)
    // ç»“æœä¸º -1
   ```
5.  `replace`ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„ **String** æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨æ›¿æ¢å­—ç¬¦ä¸²æ›¿æ¢æ‰åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²ã€‚
   ```javascript
    let myRe = /l\d+l/g
    'lol is very good l1l l2l i3l ll'.replace(myRe, 'ğŸ˜€')
    // ç»“æœä¸º "lol is very good ğŸ˜€ ğŸ˜€ i3l ll"

    'hello world'.replace(myRe, 'ğŸ˜€')
    // ç»“æœä¸º 'hello world'
   ```
6. `split`ä¸€ä¸ªä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªå›ºå®šå­—ç¬¦ä¸²åˆ†éš”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†åˆ†éš”åçš„å­å­—ç¬¦ä¸²å­˜å‚¨åˆ°æ•°ç»„ä¸­çš„ **String** æ–¹æ³•.
   ```javascript
    let myRe = /l\d+l/g
    'lol is very good l1l l2l i3l ll'.split(myRe)
    // ç»“æœä¸º Â ["lol is very good ", " ", " i3l ll"]
   ```

## æ­£åˆ™çš„åˆ†ç»„
1. ä½¿ç”¨æ‹¬å·è¿›è¡Œç®€å•åˆ†ç»„ï¼ˆæ•è·å‹åˆ†ç»„ï¼‰
   ```javascript
    var regex = /(\d{4})-(\d{2})-(\d{2})/;
    var string = "2017-06-12";
    let matchArr = string.match(regex) // æ­¤æ–¹æ³•ç­‰åŒäº regex.exec(string)
    // matchArr = ["2017-06-12", "2017", "06", "12",...]
    // æ­¤æ—¶å¯ä»¥æ ¹æ® æ•°ç»„çš„ä¸‹æ ‡è¿›è¡Œè·å–ã€‚
   ```
   å¯ä»¥é€šè¿‡RegExpå¯¹è±¡çš„æ–¹å¼è¿›è¡Œåˆ†ç»„çš„è·å–
   ```javascript
    var regex = /(\d{4})-(\d{2})-(\d{2})/;
    var string = "2017-06-12";

    regex.test(string); // æ­£åˆ™æ“ä½œå³å¯ï¼Œä¾‹å¦‚
    //regex.exec(string);
    //string.match(regex);

    console.log(RegExp.$1); // "2017"
    console.log(RegExp.$2); // "06"
    console.log(RegExp.$3); // "12"
   ```
   ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­,æŠŠyyyy-mm-ddæ ¼å¼ï¼Œæ›¿æ¢æˆmm/dd/yyyyï¼š
   ```javascript
    var regex = /(\d{4})-(\d{2})-(\d{2})/;
    var string = "2017-06-12";
    var result = string.replace(regex, "$2/$3/$1");
    console.log(result); 
    // => "06/12/2017"

    // ä»¥ä¸‹ä»£ç æ•ˆæœç›¸åŒ
    var regex = /(\d{4})-(\d{2})-(\d{2})/;
    var string = "2017-06-12";
    var result = string.replace(regex, function() {
        return RegExp.$2 + "/" + RegExp.$3 + "/" + RegExp.$1;
    });
    console.log(result); 
    // => "06/12/2017"
   ```
2. éæ•è·å‹åˆ†ç»„  
   å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³ç®€å•çš„è¿›è¡Œåˆ†ç»„ï¼Œè€Œæ²¡æœ‰æ•è·çš„éœ€æ±‚ï¼Œ ä½¿ç”¨ `?:` æ¥è¡¨ç¤ºï¼š
   ```javascript
    let regex = /(?:\d{4}-(\d{2})-(\d{2}))/
    let str = '2019-03-01'
    regex.test(str) // true

    console.log(RegExp.$1) // '03'
    //å³ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·å†…ä¸ä¼šè¿›è¡Œæ•è·ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªä¸º 03
   ```
3. åå‘å¼•ç”¨ã€‚  
   
   åå‘å¼•ç”¨æ˜¯é€šè¿‡`\1`ã€`\2`ã€`\3`...ç­‰åä¹‰+æ•°å­—çš„æ–¹å¼ï¼Œå¯¹ä¹‹å‰å·²ç»åˆ†ç»„çš„ä¿¡æ¯è¿›è¡Œå†å¼•ç”¨ã€‚

   æ¯”å¦‚ï¼ŒåŒ¹é…ä»¥ä¸‹æ—¥æœŸï¼š
   > 2019-03-01  
   2019.03.01  
   2019/03/01

   æ­£å¸¸æ–¹æ³•åŒ¹é…æ—¶ï¼Œå¯èƒ½ä¼šä½¿ç”¨å¦‚ä¸‹æ­£åˆ™è¿›è¡ŒåŒ¹é…ï¼š
   ```javascript
    let regex = /\d{4}(-|\.|\/)\d{2}(-|\.|\/)d{2}/
    let str1 = '2019-03-01'
    let str2 = '2019.03.01'
    let str3 = '2019/03/01'
    let str4 = '2019-03/01'
    console.log(regex.test(str1)) // true
    console.log(regex.test(str2)) // true
    console.log(regex.test(str3)) // true
    console.log(regex.test(str4)) // true

    //å³ï¼Œè™½ç„¶å¯ä»¥æ­£ç¡®åŒ¹é…ä»¥ä¸Šæ—¶é—´æ ¼å¼ï¼Œä½†æ˜¯åƒ 2019-03/01 è¿™ç§æ ¼å¼ä¹Ÿä¼šåŒ¹é…ã€‚
   ```
   å¦‚æœï¼Œéœ€è¦å‰åä¸€è‡´çš„è¿›è¡ŒåŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨åå‘å¼•ç”¨ã€‚
   ```javascript
    let regex = /\d{4}(-|\.|\/)\d{2}\1\d{2}/
    // \1 è¡¨ç¤ºå‰ä¸€ä¸ªåŒ¹é…çš„åˆ†ç»„ç»“æœ
    let str1 = '2019-03-01'
    let str2 = '2019.03.01'
    let str3 = '2019/03/01'
    let str4 = '2019-03/01'
    console.log(regex.test(str1)) // true
    console.log(regex.test(str2)) // true
    console.log(regex.test(str3)) // true
    console.log(regex.test(str4)) // false
   ```
   éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š
   > æ‹¬å·åµŒå¥—ï¼Œä»¥å·¦æ‹¬å·ä¸ºå‡†ã€‚
    ```javascript
    var regex = /^((\d)(\d(\d)))\1\2\3\4$/;
    var string = "1231231233";
    console.log( regex.test(string) ); // true
    console.log( RegExp.$1 ); // 123
    console.log( RegExp.$2 ); // 1
    console.log( RegExp.$3 ); // 23
    console.log( RegExp.$4 ); // 3

    /**
     * å·¦ä¾§ä¸ºä¸‰ä¸ªæ•°å­—ï¼Œå³åŒ¹é…çš„ä¸º123
     * \1 å¯¹åº”ç¬¬ä¸€ä¸ªæ‹¬å·ï¼ŒåŒ¹é…çš„ä¸º 123
     * \2 å¯¹åº”ç¬¬äºŒä¸ªæ‹¬å·ï¼ŒåŒ¹é…çš„æ•°å­—ä¸º 1
     * \3 å¯¹åº”ç¬¬ä¸‰ä¸ªæ‹¬å·ï¼ŒåŒ¹é…æ•°å­—ä¸º 23
     * \4 å¯¹åº”ç¬¬å››ä¸ªæ‹¬å·ï¼ŒåŒ¹é…æ•°å­—ä¸º 3
     * 
     * å³ï¼Œ'1231231233'å¯ä»¥åŒ¹é…æˆåŠŸã€‚
     */
    ```
   > \10 åº”è¯¥åŒ¹é…ä¸º \10 è€Œä¸æ˜¯ \1å’Œ0ã€‚
    ```javascript
    var regex = /(1)(2)(3)(4)(5)(6)(7)(8)(9)(#) \10+/;
    var string = "123456789# ######"
    console.log( regex.test(string) );
    // => true
    ```
   > å¼•ç”¨ä¸å­˜åœ¨çš„åˆ†ç»„ï¼Œåˆ™ \1 ä¼šè¢«åŒ¹é…ä¸ºæ•°å­—çš„åä¹‰å¼•ç”¨ã€‚å³ï¼Œ\1 çš„è½¬ä¹‰ã€‚
    ```javascript
    var regex = /\1\2\3\4\5\6\7\8\9/;
    console.log( regex.test("\1\2\3\4\5\6\7\8\9") ); 
    console.log( "\1\2\3\4\5\6\7\8\9".split("") );
    ```
4. å‘½ååˆ†ç»„  
   å¯ä»¥é€šè¿‡åœ¨æ‹¬å·å†…åŠ å…¥å‘½åæ ‡è¯†çš„æ–¹å¼ï¼Œè¿›è¡Œåˆ†ç»„å‘½åã€‚ä¹‹åå¯ä»¥é€šè¿‡åç§°è¿›è¡Œåˆ†ç»„çš„è·å–ã€‚
   ```javascript
    let regex = /(?<year>\d{4})(-|\.|\/)(?<month>\d{2})\2(?<day>\d{2})/
    let str = '2019-03-01'
    let matchObj = str.match(regex) 
    // ["2019-03-01", "2019", "-", "03", "01",... groups: {â€¦}]

    const year = matchObj.groups.year // 2019
    const month = matchObj.groups.month // 03
    const day = matchObj.groups.day // 01
   ```